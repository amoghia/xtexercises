$(function(){var t={postButton:$(".js-user__post-button"),postText:$(".js-user__post"),postAddUrl:"/posts/add"};$("form").each(function(){$(this).validate(),$(this).find('[type="submit"]').click(function(){var t=$(this).siblings("#recaptcha"),s=grecaptcha.getResponse();return 0!==t.length&&0===s.length?($("#g-recaptcha-error").removeClass("hidden"),!1):($(this).submit(),!0)})});var s={url:t.postAddUrl,type:"POST",data:{post:""},success:null};t.postButton.prop("disabled",!0),t.postText.keyup(function(){t.postButton.prop("disabled",""==this.value)}),t.postButton.click(function(){s.data.post=t.postText.val().replace(/<script(.*)>(.*)<\/script>/,""),s.success=function(){var t=Handlebars.compile($("#user-story").html());$(".js-user__stories-wrapper").append(t({post:s.data.post.replace(new RegExp("\n","g"),"<br>")}))},t.postText.val(""),t.postButton.prop("disabled",!0),$.ajax(s)})});