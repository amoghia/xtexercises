$(function(){var t={postButton:$(".js-user__post-button"),postText:$(".js-user__post"),postAddUrl:"/posts/add"};$("form").each(function(){$(this).validate({ignore:".ignore",rules:{password:{minlength:5},confPassword:{minlength:5,equalTo:"#signupPassword"}},messages:{password:{minlength:"Please enter more than 5 characters"},confPassword:{minlength:"Please enter more than 5 characters",equalTo:"Please enter the same password as above"}}}),$(this).find('[type="submit"]').click(function(){var t=$(this).siblings("#recaptcha"),s=grecaptcha.getResponse();return 0!==t.length&&0===s.length?($("#g-recaptcha-error").removeClass("hidden"),!1):($(this).submit(),!0)})}),t.postButton.prop("disabled",!0),t.postText.keyup(function(){t.postButton.prop("disabled",""==this.value)}),t.postButton.click(function(){var s={url:t.postAddUrl,type:"POST",data:{post:t.postText.val().replace(/<script(.*)>(.*)<\/script>/,"")},success:function(){var t=Handlebars.compile($("#user-story").html());$(".js-user__stories-wrapper").append(t({post:s.data.post.replace(new RegExp("\n","g"),"<br>")}))}};t.postText.val(""),t.postButton.prop("disabled",!0),$.ajax(s)})});